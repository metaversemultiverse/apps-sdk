# apps-sdk

This sdk is used to leverage some of the capabilities exposed via `<monday-code />`:

- Storage - A Key/Value storage
- Secure Storage - A key/Value secure storage

## Table of Contents

<!-- TOC -->

- [Storage](#storage)
  - [Storage API](#storage-api)
    - [Initialize](#initialize)
    - [Set](#set)
    - [get](#get)
    - [delete](#delete)
- [Secure storage](#secure-storage)
_ [Secure Storage API](#secure-storage-api)
_ [initialize](#initialize-1)
_ [Set](#set-1)
_ [get](#get-1) \* [delete](#delete-1)
<!-- TOC -->

## Storage

- This is the way to store customer data for your app
- **_key/value_** based where the **_key_** is a `string` and **_value_** can be `any serializable type` (object, number, string, etc.)
- **_compartmentalized_** based on **accountId** and **app** for your specific app which means that data stored for one account will not be accessible from the context of another account

### Storage API

There are three methods exposed to manage the storage - `set`, `get` and `delete`

#### Initialize

- `<ACCESS_TOKEN>` - access token of the customer/account the app is working on behalf of

```typescript
import { Storage } from '@mondaycom/apps-sdk';

const storage = new Storage(<ACCESS_TOKEN>);
```

#### Set

- `key: string` - key to store the content for
- `value: any` - value to store
- `previousVersion?: string` - the last version of the stored value for a specific key (_OPTIONAL_)
- `version: string` - the new version of the stored value

```typescript
const { version } = await storage.set(key, value, { previousVersion });
```

#### get

```typescript
const storedValue = await storage.get(key);
```

#### delete

```typescript
await storage.delete(key);
```

## Secure storage

- This is the way to store sensitive customer data (i.e access tokens generated by OAuth for example)
- Has 3 different modes (dependent on where it is used)
  - `Secure storage` - when used in a deployed `<monday-code/>` project it will automatically utilize the **real** secure storage
  - `Local "secure storage"` - a local mock db which will mimic the api exposed by the real secure storage. Will work in this mode when sdk is used locally.
    > If there are no permissions to write files on the disk, Local "secure storage" will not be persisted
- **_key/value_** based where the **_key_** is a `string` and **_value_** can be `any type` (object, number, string, etc.)
- **_compartmentalized_** for your **specific app** which means that data stored for one app will not be accessible by other apps

### Secure Storage API

There are three methods exposed to manage the storage - `set`, `get` and `delete`

#### initialize

```typescript
import { SecureStorage } from '@mondaycom/apps-sdk';

const secureStorage = new SecureStorage();
```

#### Set

- `key: string` - key to store the content for
- `value: any` - value to store (must be serializable)

```typescript
await secureStorage.set(key, value);
```

#### get

```typescript
const storedValue = await secureStorage.get(key);
```

#### delete

```typescript
await secureStorage.delete(key);
```
